<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Kinetis-M Peripheral Bare-Metal Drivers: FLL Bypassed Controlled by 8.0 MHz OSC</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="drivers.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fsl_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis-M Peripheral Bare-Metal Drivers
   &#160;<span id="projectnumber">EAR2.2</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__oscvlpr__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">FLL Bypassed Controlled by 8.0 MHz OSC<div class="ingroups"><a class="el" href="group__fll__examples.html">FLL Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This example demonstrates VLPR operation with core, bus and flash blocks clocked by FLL module. The FLL module is configured in Bypass Low Power External (BLPE) mode clocked by 8.0 MHz System Oscillator (OSC). </p>
<dl class="section user"><dt>Source code:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * (c) Copyright 2010-2013, Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment"> ******************************************************************************</span></div>
<div class="line"><span class="comment"> * oscvlpr_test.c</span></div>
<div class="line"><span class="comment"> ******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;drivers.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* some macros for transitioning to BLPE mode                                 */</span> </div>
<div class="line"><span class="preprocessor">#define FLL_BLPI_TO_FBI() { MCG_C2 &amp;= ~MCG_C2_LP_MASK; }</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define FLL_FBI_TO_FBE(frdiv)                                                 \</span></div>
<div class="line"><span class="preprocessor">{                                                                             \</span></div>
<div class="line"><span class="preprocessor">    MCG_C2 = (MCG_C2_RANGE0(1) | MCG_C2_EREFS0_MASK);                         \</span></div>
<div class="line"><span class="preprocessor">    MCG_C1 = (MCG_C1_CLKS(2) | MCG_C1_FRDIV(frdiv));                          \</span></div>
<div class="line"><span class="preprocessor">    MCG_C4 &amp;= ~(MCG_C4_DMX32_MASK | MCG_C4_DRST_DRS(3));                      \</span></div>
<div class="line"><span class="preprocessor">    while((MCG_S &amp; MCG_S_IREFST_MASK) != 0)   ;                               \</span></div>
<div class="line"><span class="preprocessor">    while((MCG_S &amp; MCG_S_CLKST_MASK) != 8)    ;                               \</span></div>
<div class="line"><span class="preprocessor">}</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#define FLL_FBE_TO_BLPE() { MCG_C2 |= MCG_C2_LP_MASK; }</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">/* enable clocks to all peripherals - clock mode 2:1:1 (core:bus:flash)     */</span></div>
<div class="line">  <a class="code" href="group__sim__macro.html#gaa18c82149801915ea85f8b112247449a" title="SIM initialization. ">SIM_Init</a> (<a class="code" href="group__sim__config.html#ga899efbad9c2c6af161201c24aafd9e71" title="Full configuration. ">SIM_MODULE_ALL_PERIPH_ON_CONFIG</a>);</div>
<div class="line">  <a class="code" href="group__smc__macro.html#gaec829fb4ccda92c5271cb4d6bb210395" title="SMC initialization. ">SMC_Init</a> (<a class="code" href="group__smc__config.html#gab03c890a671d478bf2d2458399d40d2f" title="All Very-Low-Power (VLPS) and Very-Low-Leakage (VLLS) modes enabled. ">SMC_MODULE_VLPS_ON_VLLS_ON_CONFIG</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* route bus clock to PTF7                                                  */</span></div>
<div class="line">  <a class="code" href="group__sim__macro.html#ga48aa002b9520efb657eecdf936d90566" title="Selects clock source for CLKOUT pins and XBAR_IN[5]. ">SIM_SelClkoutSrc</a> (<a class="code" href="group__clkout__src.html#gad7831a57b1d6b4535195856462322ceb" title="Bus/Flash clock. ">CLKOUT_SRC2</a>);</div>
<div class="line">  <a class="code" href="group__gpio__macro.html#ga490483fec680af05353307c33833c902" title="PORT pin(s) initialization. ">PORT_Init</a> (PORTF,<a class="code" href="group__port__config.html#ga305750cfc2b11cbc99a808bcd905a879" title="Configures pin(s) to Alternative 3 (chip-specific) mode. ">PORT_MODULE_ALT3_MODE</a>,<a class="code" href="group__pin__names.html#gaf4d3f80395907ab4999773479f1aecf1" title="PIN 7 (MSB) ">PIN7</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* system oscillator and FLL settings                                       */</span></div>
<div class="line">  <a class="code" href="group__osc__macro.html#ga023d8e995d02aaa2575979de4759c260" title="System oscillator initialization. ">OSC_Init</a> (<a class="code" href="group__osc__config.html#gad51c6d5e58abe510604be223cce67abc" title="Enables external reference clock (OSCERCLK). The OSCERCLK is enabled in STOP mode. ">OSC_MODULE_OSCERCLK_ON_STOPMODE_ON_CONFIG</a>(<a class="code" href="group__osc__load__caps.html#ga02c7e52d7798c6860a5d95830830ce0d" title="No internal load capacitor applied. ">OSC_SC0P</a>));</div>
<div class="line">  <a class="code" href="group__sim__macro.html#gac9736d86362b16880c372125db55b28a" title="Sets system clock divider mode. ">SIM_SetClkDiv</a> (<a class="code" href="group__sim__sysdiv.html#gae42baa4da57ce5408cefd248cb6ba5ed" title="divide by 10 ">SYSCLK_DIV10</a>);</div>
<div class="line"><span class="preprocessor">#if 1   </span></div>
<div class="line"><span class="preprocessor"></span>  <a class="code" href="group__fll__macro.html#ga7580cacf431ec570d6897e8b2ed539d2" title="FLL initialization. ">FLL_Init</a> (<a class="code" href="group__fll__config.html#gabbb3252e24f575de1375d6b575ef6fd4" title="FLL Bypassed Low Power External. Clocked by System Oscillator External Reference Clock with Frequency...">FLL_MODULE_BLPE_OSC_CONFIG</a>);</div>
<div class="line"><span class="preprocessor">#else  </span></div>
<div class="line"><span class="preprocessor"></span>  FLL_BLPI_TO_FBI();</div>
<div class="line">  FLL_FBI_TO_FBE (3);</div>
<div class="line">  FLL_FBE_TO_BLPE();</div>
<div class="line"><span class="preprocessor">#endif  </span></div>
<div class="line"><span class="preprocessor"></span>  <span class="comment">/* switch to VLPR mode                                                      */</span></div>
<div class="line">  <a class="code" href="group__smc__macro.html#gabbc72e0b58d6236338fe1e11eebefce0" title="Sets device operating mode. ">SMC_SetMode</a>(VLPR);</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">while</span>(1);</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Appconfig.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment"> * (c) Copyright 2010, Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef __APPCONFIG_H</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __APPCONFIG_H</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define MCU_MKM34Z50</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">//#define MTB_RAM_RESERVE</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">//#define EMULATE_BME_IO_ACCESS</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* __APPCONFIG_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Toolchain support:</dt><dd><table class="doxtable">
<tr>
<th align="center">IAR EWARM 6.5x</th><th align="center">CW MCU 10.x</th><th align="center">KEIL uVision 4.72</th><th align="center">CrossWorks 2.3.3  </th></tr>
<tr>
<td align="center">x </td><td align="center">x </td><td align="center"></td><td align="center">x </td></tr>
</table>
</dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 4 2013 13:45:05 for Kinetis-M Peripheral Bare-Metal Drivers by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
