<!-- HTML header for doxygen 1.8.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>Kinetis-M Peripheral Bare-Metal Drivers: AFE Low Power Operation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script src="http://www.mathjax.org/mathjax/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="drivers.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="fsl_logo.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Kinetis-M Peripheral Bare-Metal Drivers
   &#160;<span id="projectnumber">EAR2.2</span>
   </div>
   <div id="projectbrief">Reference Manual</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Introduction</span></a></li>
      <li><a href="pages.html"><span>Pages</span></a></li>
      <li><a href="modules.html"><span>Reference</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__afelp__example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">AFE Low Power Operation<div class="ingroups"><a class="el" href="group__afe__examples.html">AFE Examples</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>This example demonstrates typical use of the Analogue Front End (AFE) peripheral operating in low power mode with PGA disabled. The device runs in BLPI mode with 1.0 MHz system, bus, flash and AFE clocks derived from the 4.0 MHz Internal Clock (IRC). The FreeMASTER communicates via UART1 of the Kinetis-M device which is configured for 38400/8-N-1 and serviced by application software in a polling mode. Connect USB port of your PC to the on-board OpenSDA's USB to serial bridge (J14) when running example on TWR-KM34Z50M board.</p>
<p>The software example was used for measuring power consumption of the MKM34Z128CLL5 device (Rev 1.0) at various hardware configurations - see results below. </p>
<table class="doxtable">
<tr>
<th align="center">Hardware Configuration </th><th align="center">Idd+Idda  </th></tr>
<tr>
<td align="center">2xSDADCLPM+VREFLPM+UART1 </td><td align="center">2.25mA </td></tr>
<tr>
<td align="center">1xSDADCLPM+VREFLPM+UART1 </td><td align="center">1.69mA </td></tr>
<tr>
<td align="center">VREFLPM+UART1 </td><td align="center">1.18mA </td></tr>
<tr>
<td align="center">UART1 </td><td align="center">0.85mA </td></tr>
</table>
<p>Idd+Idda measured at J6 header of the TWR-KM34Z50M board using METEX M-4650CR Multimeter.*</p>
<dl class="section user"><dt>Source code:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment"> * (c) Copyright 2010-2013, Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment"> ******************************************************************************</span></div>
<div class="line"><span class="comment"> * afelp_test.c</span></div>
<div class="line"><span class="comment"> ******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#include &quot;drivers.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/* static data definitions                                                    */</span></div>
<div class="line"><span class="keyword">volatile</span> <a class="code" href="group__basic__data__types.html#ga56f1a81c92849566ae864511088eb7e8" title="signed 32 bits ">int32</a> result[2];</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#pragma required=result</span></div>
<div class="line"><span class="preprocessor"></span><span class="keywordtype">void</span> main (<span class="keywordtype">void</span>)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">/* initialize SIM module                                                    */</span></div>
<div class="line">  <a class="code" href="group__smc__macro.html#gaec829fb4ccda92c5271cb4d6bb210395" title="SMC initialization. ">SMC_Init</a> (<a class="code" href="group__smc__config.html#gae2d757fe0a137d096da5d44a280caf23" title="Only Very-Low-Power (VLPS) modes enabled. ">SMC_MODULE_VLPS_ON_VLLS_OFF_CONFIG</a>); </div>
<div class="line">  <a class="code" href="group__sim__macro.html#gaa18c82149801915ea85f8b112247449a" title="SIM initialization. ">SIM_Init</a> (SIM_MODULE_LP_CONFIG);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* clock mode 1:1:1, 1.0 MHz                                                */</span></div>
<div class="line">  <a class="code" href="group__sim__macro.html#ga6e7f0c7c0edd7fc3f093107455303c6d" title="Sets system clock mode [SYSCLKMODE]. ">SIM_SetClkMode</a> (<a class="code" href="group__sim__sysmode.html#gadec75cdc4e708f57d985a98895301efc" title="1:1:1; System : Bus : Flash clock ratio ">SYSCLK_MODE0</a>); </div>
<div class="line">  <a class="code" href="group__sim__macro.html#gac9736d86362b16880c372125db55b28a" title="Sets system clock divider mode. ">SIM_SetClkDiv</a>  (<a class="code" href="group__sim__sysdiv.html#gab927c3c32a8ba78fbc2774d8cd838c71" title="divide by 02 ">SYSCLK_DIV2</a>);</div>
<div class="line">  <a class="code" href="group__fll__macro.html#ga7580cacf431ec570d6897e8b2ed539d2" title="FLL initialization. ">FLL_Init</a>  (<a class="code" href="group__fll__config.html#gac052a889de9fe56362f2f289b55b7d33" title="FLL Bypassed Low Power Internal (2MHz). Clocked by Fast Internal Reference Clock. ...">FLL_MODULE_BLPI_2MHZ_CONFIG</a>);</div>
<div class="line">  <a class="code" href="group__pmc__macro.html#gae7e302f6ff1bde62b0cd75f23053897a" title="Enables bangap reference in VLPx and VLLSx modes. ">PMC_SetBGEN</a> ();                                 <span class="comment">/* enable VREF in VLPR mode */</span></div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* switch to VLPR mode                                                      */</span>   </div>
<div class="line">  <a class="code" href="group__smc__macro.html#gabbc72e0b58d6236338fe1e11eebefce0" title="Sets device operating mode. ">SMC_SetMode</a>(VLPR);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* VREF module must be initialized after SIM module                         */</span></div>
<div class="line">  <a class="code" href="group__vref__macro.html#gace0c1b919114cf06d2e75cc0cb866e6a" title="Voltage reference initialization function. ">VREF_Init</a> (<a class="code" href="group__vref__module__config.html#ga2b6e09612ee71659fbeea3ea45e3b763" title="Voltage reference setting. ">VREF_MODULE_CHOP_OFF_1V75_0V4_LPWR_CONFIG</a>,</div>
<div class="line">             <a class="code" href="group__vref__switch__config.html#ga2e702986fc8cb65aa44e7b3c114e06cb" title="Voltage reference switch setting. ">VREF_SWITCH_S1_L_S2_L_S3_L_BUFF_OFF</a>);</div>
<div class="line">  <a class="code" href="group__vref__macro.html#ga7980767851e5fa5a8fd1d270619fa637" title="Higher reference voltage Trim value change. ">VREFH_Trim</a>(46);                                 <span class="comment">/* VREFH trimmed to 1.200 V */</span></div>
<div class="line">  <a class="code" href="group__vref__macro.html#ga996a9e70c90befba7b221a931e3dd99a" title="Lower reference voltage Trim value change. ">VREFL_Trim</a>( 3);                                 <span class="comment">/* VREFL trimmed to 0.400 V */</span></div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* AFE_CH0 &amp; AFE_CH2 init                                                   */</span></div>
<div class="line">  <a class="code" href="group__afe__macro.html#ga66edab82dee2992b38d59ab6850a5612" title="AFE channel initialization. ">AFE_ChanInit</a> (<a class="code" href="group__afe__channel.html#gaf6f592bd18a57b35061f111d32a7f637" title="Channel 1. ">CH0</a>, <a class="code" href="group__afe__chan__config.html#gad5fe9fa72b8c407e87bb9fcba39519d7" title="Selects software trigger continuous conversion mode. PGA is disabled. ">AFE_CH_SWTRG_CCM_PGAOFF_CONFIG</a>(<a class="code" href="group__afe__osr.html#ga39300b68c10b4e023e5cd9f8246b1e1e" title="f-3dB= 6.29KHz,fn= 12KHz @ fs=6.144MHz ">DEC_OSR256</a>),0,<a class="code" href="group__cm0plus__prilvl.html#ga3461048206d4aa48866deedbdd269c1b" title="Priority level 0 (highest priority) ">PRI_LVL0</a>,NULL);</div>
<div class="line">  <a class="code" href="group__afe__macro.html#ga66edab82dee2992b38d59ab6850a5612" title="AFE channel initialization. ">AFE_ChanInit</a> (<a class="code" href="group__afe__channel.html#ga92dc73af14a6902eadd21bdee033cbfb" title="Channel 3. ">CH2</a>, <a class="code" href="group__afe__chan__config.html#gad5fe9fa72b8c407e87bb9fcba39519d7" title="Selects software trigger continuous conversion mode. PGA is disabled. ">AFE_CH_SWTRG_CCM_PGAOFF_CONFIG</a>(<a class="code" href="group__afe__osr.html#ga39300b68c10b4e023e5cd9f8246b1e1e" title="f-3dB= 6.29KHz,fn= 12KHz @ fs=6.144MHz ">DEC_OSR256</a>),0,<a class="code" href="group__cm0plus__prilvl.html#ga3461048206d4aa48866deedbdd269c1b" title="Priority level 0 (highest priority) ">PRI_LVL0</a>,NULL); </div>
<div class="line">  <a class="code" href="group__afe__macro.html#ga28f7c6e1a5c44d9801da371cfaa16c76" title="AFE module initialization. ">AFE_Init</a>     (<a class="code" href="group__afe__module__config.html#ga471b547e4d52af44d090bdaa95b4d15d" title="Selects low power mode of operation with right justified 2&#39;s complement 32-bit output data format...">AFE_MODULE_LPM_RJFORMAT_CONFIG</a>(<a class="code" href="group__afe__clocks.html#ga6ab3ba12c35b088e78bffd4f1d31f643" title="MCG_IRC_CLK(2MHZ or 32KHz) ">AFE_IRC_CLK</a>, <a class="code" href="group__afe__clkdiv.html#ga23e85f5d9699f6166c56127569afa639" title="divide by 1 ">AFE_DIV1</a>, 1000000));</div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* initialize UART and FreeMASTER                                           */</span></div>
<div class="line">  <a class="code" href="group__gpio__macro.html#ga490483fec680af05353307c33833c902" title="PORT pin(s) initialization. ">PORT_Init</a> (PORTI, <a class="code" href="group__port__config.html#ga04f71ff96eecc9ab06c8923d7fc715ef" title="Configures pin(s) to Alternative 2 (chip-specific) mode. ">PORT_MODULE_ALT2_MODE</a>, <a class="code" href="group__pin__names.html#ga8909e4cc8d1f05aeb73943042144abdf" title="PIN 0 (LSB) ">PIN0</a>|<a class="code" href="group__pin__names.html#ga522e24eb599eab6d1ec4b1ae5a3a12b2" title="PIN 1. ">PIN1</a>);</div>
<div class="line">  <a class="code" href="group__uart__macro.html#ga71fab83195d7393a8ad6b71b608b403b" title="UART initialization. ">UART_Init</a> (UART1, <a class="code" href="group__uart__config.html#gaa549ae895972a794706874c2434444b4" title="UART configured to operate in polling mode. Receive and transmit data is not inverted. ">UART_MODULE_POLLMODE_CONFIG</a>(38400,1.0e6));  </div>
<div class="line">  FMSTR_Init(); </div>
<div class="line">  </div>
<div class="line">  <span class="comment">/* trigger AFE conversions                                                  */</span></div>
<div class="line">  <a class="code" href="group__afe__macro.html#gadc6a6599f955f66caff6c18266eba169" title="Triggers conversion on selected AFE channel(s). ">AFE_SwTrigger</a> (<a class="code" href="group__afe__channel.html#gaf6f592bd18a57b35061f111d32a7f637" title="Channel 1. ">CH0</a>|<a class="code" href="group__afe__channel.html#ga92dc73af14a6902eadd21bdee033cbfb" title="Channel 3. ">CH2</a>);</div>
<div class="line"></div>
<div class="line">  <span class="comment">/* main loop                                                                */</span></div>
<div class="line">  <span class="keywordflow">while</span> (1)</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">if</span> ((<a class="code" href="group__afe__macro.html#ga6b3e1c54dfeb351531bd41fb4cf5302b" title="Returns conversion status (COCx flag) for given AFE channel. ">AFE_ChanReady</a>(<a class="code" href="group__afe__channel.html#gaf6f592bd18a57b35061f111d32a7f637" title="Channel 1. ">CH0</a>)) &amp;&amp; (<a class="code" href="group__afe__macro.html#ga6b3e1c54dfeb351531bd41fb4cf5302b" title="Returns conversion status (COCx flag) for given AFE channel. ">AFE_ChanReady</a>(<a class="code" href="group__afe__channel.html#ga92dc73af14a6902eadd21bdee033cbfb" title="Channel 3. ">CH2</a>))) </div>
<div class="line">    { </div>
<div class="line">      <a class="code" href="group__afe__macro.html#gaf776d34dafb13b4dc33c3d07de47130f" title="Returns 2&#39;s complement 32-bit values of the selected channel result registers. ">AFE_Read</a> (<a class="code" href="group__afe__channel.html#gaf6f592bd18a57b35061f111d32a7f637" title="Channel 1. ">CH0</a>, &amp;result[0]); </div>
<div class="line">      <a class="code" href="group__afe__macro.html#gaf776d34dafb13b4dc33c3d07de47130f" title="Returns 2&#39;s complement 32-bit values of the selected channel result registers. ">AFE_Read</a> (<a class="code" href="group__afe__channel.html#ga92dc73af14a6902eadd21bdee033cbfb" title="Channel 3. ">CH2</a>, &amp;result[1]); </div>
<div class="line">      FMSTR_Recorder (); </div>
<div class="line">    } </div>
<div class="line">    FMSTR_Poll ();</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Appconfig.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment"> * (c) Copyright 2010, Freescale Semiconductor Inc.</span></div>
<div class="line"><span class="comment"> * ALL RIGHTS RESERVED.</span></div>
<div class="line"><span class="comment"> ***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef __APPCONFIG_H</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __APPCONFIG_H</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define MCU_MKM34Z50</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">//#define MTB_RAM_RESERVE</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">//#define EMULATE_BME_IO_ACCESS</span></div>
<div class="line"></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define SIM_MODULE_LP_CONFIG                                                    \</span></div>
<div class="line"><span class="preprocessor">(tSIM){                                                                         \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SOPT1    */</span><span class="preprocessor"> SET(SIM_SOPT1_OSC32KSEL(0)),                                     \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SOPT1_CFG*/</span><span class="preprocessor"> CLR(SIM_SOPT1_CFG_RAMBPEN_MASK)|CLR(SIM_SOPT1_CFG_RAMSBDIS_MASK)|\</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SOPT1_CFG_CMPOLPTMR0SEL_MASK)|                           \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SOPT1_CFG_LPTMR3SEL(0))|SET(SIM_SOPT1_CFG_LPTMR2SEL(0))| \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SOPT1_CFG_LPTMR1SEL(0)),                                 \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* CTRL_REG */</span><span class="preprocessor"> SET(SIM_CTRL_REG_CLKOUTSEL(0))|                                  \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_CTRL_REG_SAR_TRG_CLK_SEL(0))|                            \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_CTRL_REG_PTC2_HD_EN_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_CTRL_REG_PLL_VLP_EN_MASK)|SET(SIM_CTRL_REG_NMIDIS_MASK), \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SCGC4    */</span><span class="preprocessor"> CLR(SIM_SCGC4_SPI1_MASK)|CLR(SIM_SCGC4_SPI0_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC4_CMP1_MASK)|CLR(SIM_SCGC4_CMP0_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SCGC4_VREF_MASK)|CLR(SIM_SCGC4_UART3_MASK)|              \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC4_UART2_MASK)|SET(SIM_SCGC4_UART1_MASK)|             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC4_UART0_MASK)|CLR(SIM_SCGC4_I2C1_MASK)|              \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC4_I2C0_MASK)|CLR(SIM_SCGC4_OSC_MASK)|                \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SCGC4_MCG_MASK)|CLR(SIM_SCGC4_EWM_MASK),                 \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SCGC5    */</span><span class="preprocessor"> CLR(SIM_SCGC5_TMR3_MASK)|CLR(SIM_SCGC5_TMR2_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_TMR1_MASK)|CLR(SIM_SCGC5_TMR0_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_XBAR_MASK)|SET(SIM_SCGC5_WDOG_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SCGC5_IRTCREGFILE_MASK)|SET(SIM_SCGC5_IRTC_MASK)|        \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SCGC5_PORTI_MASK)|CLR(SIM_SCGC5_PORTH_MASK)|             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_PORTG_MASK)|CLR(SIM_SCGC5_PORTF_MASK)|             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_PORTE_MASK)|CLR(SIM_SCGC5_PORTD_MASK)|             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_PORTC_MASK)|CLR(SIM_SCGC5_PORTB_MASK)|             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC5_PORTA_MASK)|CLR(SIM_SCGC5_SLCD_MASK),              \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SCGC6    */</span><span class="preprocessor"> SET(SIM_SCGC6_SIM_LP_MASK)|                                      \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC6_LPTMR_MASK)|CLR(SIM_SCGC6_CRC_MASK)|               \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_SCGC6_AFE_MASK)|CLR(SIM_SCGC6_PIT1_MASK)|                \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC6_PIT0_MASK)|CLR(SIM_SCGC6_ADC_MASK)|                \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC6_RNGA_MASK)|CLR(SIM_SCGC6_DMAMUX3_MASK)|            \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC6_DMAMUX2_MASK)|CLR(SIM_SCGC6_DMAMUX1_MASK)|         \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_SCGC6_DMAMUX0_MASK)|SET(SIM_SCGC6_FTFA_MASK),            \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* SCGC7    */</span><span class="preprocessor"> CLR(SIM_SCGC7_DMA_MASK)|CLR(SIM_SCGC7_MPU_MASK),                 \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* CLKDIV1  */</span><span class="preprocessor"> SET(SIM_CLKDIV1_SYSDIV(SYSCLK_DIV1))|                            \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_CLKDIV1_SYSCLKMODE_MASK),                                \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* FCCFG1   */</span><span class="preprocessor"> CLR(SIM_FCFG1_FLASHDOZE_MASK)|CLR(SIM_FCFG1_FLASHDIS_MASK),      \</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">/* MISC_CTL */</span><span class="preprocessor"> SET(SIM_MISC_CTL_VREFBUFPD_MASK)|                                \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_VREFBUFINSEL_MASK)|                             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_VREFBUFOUTEN_MASK)|                             \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_RTCCLKSEL_MASK)|                                \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR3PCSSEL(0))|                                 \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR2PCSSEL(0))|                                 \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR1PCSSEL(0))|                                 \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR0PCSSEL(0))|                                 \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR3SCSSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR2SCSSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR1SCSSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR0SCSSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_TMR0PLLCLKSEL_MASK)|                            \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_EWMINSEL_MASK)|                                 \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_XBARPITOUTSEL(0))|                              \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_UART3IRSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_UART2IRSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_UART1IRSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_UART0IRSEL_MASK)|                               \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_UARTMODTYPE_MASK)|                              \</span></div>
<div class="line"><span class="preprocessor">               CLR(SIM_MISC_CTL_AFECLKPADDIR_MASK)|                             \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_MISC_CTL_AFECLKSEL(0))|                                  \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_MISC_CTL_DMADONESEL(0))|                                 \</span></div>
<div class="line"><span class="preprocessor">               SET(SIM_MISC_CTL_XBARAFEMODOUTSEL(0)),                           \</span></div>
<div class="line"><span class="preprocessor">}</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/***************************************************************************/</span></div>
<div class="line"><span class="comment">/******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* __APPCONFIG_ */</span><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Freemaster_cfg.h:</dt><dd><div class="fragment"><div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* freemaster_cfg.h</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">* FreeMASTER Serial Communication Driver configuration file</span></div>
<div class="line"><span class="comment">*</span></div>
<div class="line"><span class="comment">*******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#ifndef __FREEMASTER_CFG_H</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define __FREEMASTER_CFG_H</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Select interrupt or poll-driven serial communication</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_LONG_INTR    0        // complete message processing in interrupt</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_SHORT_INTR   0        // SCI FIFO-queuing done in interrupt</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_POLL_DRIVEN  1        // no interrupt needed, polling only</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Select communication interface (SCI or CAN)</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="comment">//#define FMSTR_SCI_BASE 0x4006A000   // UART0 base on MKM34Z50</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_SCI_BASE 0x4006B000   // UART1 base on MKM34Z50</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">//#define FMSTR_SCI_BASE 0x4006C000   // UART2 base on MKM34Z50</span></div>
<div class="line"><span class="comment">//#define FMSTR_SCI_BASE 0x4006D000     // UART3 base on MKM34Z50</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_SCI_INTERRUPT 35      // UART0 &amp; UART1 on MKM34Z50</span></div>
<div class="line"><span class="preprocessor"></span><span class="comment">//#define FMSTR_SCI_INTERRUPT 36        // UART2 &amp; UART3 on MKM34Z50</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_SCI     1       // To select SCI communication interface </span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_FLEXCAN 0       // To select FlexCAN communication interface</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Input/output communication buffer size</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_COMM_BUFFER_SIZE 0    // set to 0 for &quot;automatic&quot;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/******************************************************************************</span></div>
<div class="line"><span class="comment">* Receive FIFO queue size (use with FMSTR_SHORT_INTR only)</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_COMM_RQUEUE_SIZE 32   // set to 0 for &quot;default&quot;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Support for Application Commands </span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_APPCMD       0    // enable/disable App.Commands support</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_APPCMD_BUFF_SIZE 32   // App.Command data buffer size</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_MAX_APPCMD_CALLS 4    // how many app.cmd callbacks? (0=disable)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Oscilloscope support</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_SCOPE       1     // enable/disable scope support</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_MAX_SCOPE_VARS  8     // max. number of scope variables (2..8)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Recorder support</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_RECORDER    1     // enable/disable recorder support</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_MAX_REC_VARS    8     // max. number of recorder variables (2..8)</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_REC_OWNBUFF     0     // use user-allocated rec. buffer (1=yes)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">// built-in recorder buffer (use when FMSTR_REC_OWNBUFF is 0)</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_REC_BUFF_SIZE   4096  // built-in buffer size</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">// recorder time base, specifies how often the recorder is called in the user app.</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_REC_TIMEBASE    FMSTR_REC_BASE_MILLISEC(0) // 0 = &quot;unknown&quot;</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Target-side address translation (TSA)</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_TSA         0     // enable TSA functionality</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_TSA_SAFETY  0     // enable access to TSA variables only</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_TSA_INROM   0     // TSA tables declared as const (put to ROM)</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Enable/Disable read/write memory commands</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_READMEM      1    // enable read memory commands</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_WRITEMEM     1    // enable write memory commands</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_WRITEMEMMASK 1    // enable write memory bits commands</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Enable/Disable read/write variable commands (a bit faster than Read Mem)</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_USE_READVAR      0    // enable read variable fast commands</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_WRITEVAR     0    // enable write variable fast commands</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define FMSTR_USE_WRITEVARMASK 0    // enable write variable bits fast commands</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="comment">/*****************************************************************************</span></div>
<div class="line"><span class="comment">* Enable copy to buffer implementation via function.</span></div>
<div class="line"><span class="comment">******************************************************************************/</span></div>
<div class="line"><span class="preprocessor">#define FMSTR_BUFFER_ACCESS_BY_FUNCT 1</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#endif </span><span class="comment">/* __FREEMASTER_CFG_H */</span><span class="preprocessor"></span></div>
</div><!-- fragment --> </dd></dl>
<dl class="section user"><dt>Toolchain support:</dt><dd><table class="doxtable">
<tr>
<th align="center">IAR EWARM 6.5x</th><th align="center">CW MCU 10.x</th><th align="center">KEIL uVision 4.72</th><th align="center">CrossWorks 2.3.3  </th></tr>
<tr>
<td align="center">x </td><td align="center">x </td><td align="center"></td><td align="center">x </td></tr>
</table>
</dd></dl>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.5-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Mon Nov 4 2013 13:45:03 for Kinetis-M Peripheral Bare-Metal Drivers by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.5 </li>
  </ul>
</div>
</body>
</html>
